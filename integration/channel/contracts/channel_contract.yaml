channels:
  method:
    name: iot/native
    methods:
      - id: scanDevices
        args:
          filters: map
      - id: connect
        args:
          deviceId: string
      - id: startTelemetry
        args:
          deviceId: string
          metrics: list
      - id: stopTelemetry
      - id: requestBatterySnapshot
        args:
          deviceId: string?
  event:
    name: iot/stream
    payload:
      type: enum(telemetry|battery|connection|discovered)
      deviceId: string?
      timestamp: int
      data: map
  peer_method:
    name: flutter_battery/peer_methods
    methods:
      - id: startMasterMode
      - id: startSlaveMode
      - id: stopMasterMode
      - id: stopSlaveMode
      - id: stopAllPeerModes
      - id: masterConnectToDevice
        args:
          deviceId: string
  peer_event:
    name: flutter_battery/peer_events
    payload:
      role: enum(master|slave)
      localBattery: int
      remoteBattery: int?
      connected: bool
